<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balloon</title>
    <style>
        #balloon {
            width: 50px;
            height: 50px;
            background-color: rgb(0, 255, 0);
            border-radius: 50%;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease-in-out;
        }

        #resetButton {
            position: fixed;
            bottom: 10px;
            right: 10px;
            padding: 10px;
            background-color: #ccc;
            cursor: pointer;
        }

        #colorPicker {
            position: fixed;
            bottom: 10px;
            left: 10px;
            padding: 10px;
        }
    </style>
</head>
<body>

<div id="balloon" onclick="resizeBalloon()"></div>
<div id="resetButton" onclick="resetBalloon()">Pop</div>
<input type="color" id="colorPicker" onchange="changeBalloonColor()" value="#00ff00">

<audio id="blowSound" src="blow.mp3"></audio>
<audio id="popSound" src="pop.mp3"></audio>

<script>
    var arrowClickCounter = 0;

    function playBlowSound() {
        var blowSound = document.getElementById("blowSound");
        blowSound.play();
    }

    function playPopSound() {
        var popSound = document.getElementById("popSound");
        popSound.play();
    }

    function resizeBalloon() {
        var balloon = document.getElementById("balloon");

        // Get the current width and height
        var currentWidth = balloon.offsetWidth;
        var currentHeight = balloon.offsetHeight;

        // Increase the width and height by a factor (e.g., 20 pixels)
        var newWidth = currentWidth + 15;
        var newHeight = currentHeight + 15;

        // Apply the new width and height
        balloon.style.width = newWidth + "px";
        balloon.style.height = newHeight + "px";

        // Play blowing sound
        playBlowSound();

        // Check if the arrow pattern matches
        checkArrowPattern("up");
    }

    function resetBalloon() {
        var balloon = document.getElementById("balloon");

        // Reset the balloon to its original size
        balloon.style.width = "50px";
        balloon.style.height = "50px";

        // Play pop sound
        playPopSound();

        // Reset arrow click counter
        arrowClickCounter = 0;
    }

    function changeBalloonColor() {
        var balloon = document.getElementById("balloon");
        var colorPicker = document.getElementById("colorPicker");

        // Change the background color based on the selected color
        balloon.style.backgroundColor = colorPicker.value;
    }

    function checkArrowPattern(direction) {
        if (direction === "up") {
            arrowClickCounter++;
        } else if (direction === "down") {
            arrowClickCounter--;
        }

        if (arrowClickCounter === 2) {
            // If the user clicks up arrow twice, change the shape to a square
            var balloon = document.getElementById("balloon");
            balloon.style.borderRadius = "0";
        } else if (arrowClickCounter === 0) {
            // If the user clicks down arrow twice, reset the shape to a circle
            var balloon = document.getElementById("balloon");
            balloon.style.borderRadius = "50%";
        }
    }

    document.addEventListener("keydown", function(event) {
        // Detect arrow key presses
        if (event.key === "ArrowUp" || event.key === "ArrowDown") {
            // Call the resizeBalloon function on arrow key presses
            resizeBalloon();
        }
    });
</script>

</body>
</html>
